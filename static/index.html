<script>
    function request(url, type, params) {
        return new Promise(function (resolve, reject) {
            let xhr = new XMLHttpRequest();
            type = type.toLowerCase();
            type = (type == "post" ? "post" : "get");
            if (type == "get") {
                params = Object.keys(params).map(function (k) {
                    return encodeURIComponent(k) + '=' + encodeURIComponent(params[k])
                }).join('&');
            }
            xhr.open(type, url + (type == "post" ? "" : ("?" + params)), true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function () {
                if (xhr.readyState == XMLHttpRequest.DONE && xhr.status >= 400) {
                    let ress = xhr.response;
                    if (typeof res.errorCode !== 'undefined') {
                        reject(new Error('Something went wrong...'));
                    }
                }
                if (xhr.readyState == XMLHttpRequest.DONE && xhr.status == 200) {
                    let res = xhr.response;
                    resolve(res);
                }
                if (xhr.readyState == 2) {
                }
            }
            xhr.onload = function () {
                let res = xhr.response;
                resolve(res);
            };
            xhr.onerror = function () {
                reject(new Error('error'));
            };
            body = JSON.stringify({ params });
            xhr.send(body);
        }).then(data => {
            return (JSON.parse(data));
        });
    }
    function submit() {
        document.querySelectorAll("textarea")[1].value = "Loading...";
        request("/api", "POST", { text: document.querySelectorAll("textarea")[0].value }).then(value => {
            document.querySelectorAll("textarea")[1].value = value.keywords.toString().replace(/,/gi, "\n");
            if (document.querySelectorAll("textarea")[1].textContent == "") {
                document.querySelectorAll("textarea")[1].value = "No results";
            }
        });
    }
    function chooseArticle(i) {
        document.querySelectorAll("textarea")[0].value = articles[i].text;
    }
    window.onload = () => {
        request("/articles", "GET", {}).then(res => {
            window.articles = res.articles;
            res.articles.forEach((article, i) => {
                var elem = document.getElementById("articles");
                elem.innerHTML += `
                    <button onclick="chooseArticle(${i});">Load</button>
                    <a id="link${i}" target="_blank"><span id="title${i}"></span></a>
                    <br />
                `;
                document.getElementById(`title${i}`).textContent = article.title;
                document.getElementById(`link${i}`).href = article.source;
            });
        });
    }
    function clearBox() {
        document.querySelectorAll("textarea")[0].value = "";
    }
</script>
<style>
    textarea {
        width: 100%;
        max-width: 100%;
    }
</style>
Input Text:
<button onclick=" clearBox()">
    Clear
</button>
<textarea rows="15">
</textarea>
<br />
<br />
<button onclick="submit()">
    Run Extraction
</button>
<br />
<br />
Result:
<br />
<textarea rows="5">
Waiting for input.
</textarea>
<br />
<br />
Articles:
<br />
<br />
<div id="articles">
</div>